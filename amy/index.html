<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>How old is Amy?</title>
  <meta name="description" content="cute and fluffy">
  <meta name="author" content="stuartd">

  <link rel="stylesheet" href="../shared/styles.css">
  
  <script src="../shared/age.js"></script>
  <script src="../shared/pics.js"></script>

</head>

<body>
  <h1>How old is Amy?</h1>
  <h3>Refresh the page or <a href="javascript:SetPic()">click here</a> to change the image</h3>
  <h2 id="amy"></h2>  
  <h4><a href="/dave/">How old is Dave?</a></h4>
  <img id="amypic" />
 </body>

<script>
  var urlParams = new URLSearchParams(window.location.search);
  var test = urlParams.get('test');
  // 8th May, so pass 4 as the month (thanks Java)
  var birthDate = new Date(2020, 4, 8);

  let imageCount = 85;
  let imageTag = "amy"; 
  
  SetPic();

  var date = test == null ? new Date() : new Date(test);
  // console.log(date);
  // console.log(new Date(test));
  // console.log(new Date(test) == date);
  window.onload = 
    (document.getElementById("amy").innerHTML = 
      calculate(date, birthDate, "Amy"));

  function SetPic() {
    var imageIndex = getImageIndex(imageCount, imageTag);
    var image = "images/amy" + imageIndex + ".jpeg";
    document.getElementById("amypic").src = image;
    console.log(image);
  }
</script>
  
</html>