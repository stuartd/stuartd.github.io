<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>How old is dave?</title>
  <meta name="description" content="obsessed with balls">
  <meta name="author" content="stuartd">

  <link rel="stylesheet" href="../shared/styles.css">
  
  <script src="../shared/age.js"></script>
  <script src="../shared/pics.js"></script>

</head>

<body>
  <h1>How old is Dave?</h1>
  <h3>Refresh the page or <a href="javascript:SetPic()">click here</a> to change the image</h3>
  <h2 id="dave"></h2>  
  <h4><a href="/amy/">How old is Amy?</a></h4>
  <img id="davepic" />  
 </body>

<script>
  var urlParams = new URLSearchParams(window.location.search);
  var test = urlParams.get('test');
  // 14th September, so pass 8 as the month (thanks Java)
  var birthDate = new Date(2015, 8, 14);

  let imageCount = 125;
  let imageTag = "dave"; 
  
  SetPic();

  var date = test == null ? new Date() : new Date(test);
  console.log(date);
  console.log(new Date(test));
  console.log(new Date(test) == date);
  window.onload = 
    (document.getElementById("dave").innerHTML = 
      calculate(date, birthDate, "Dave"));

  function SetPic() {
    var imageIndex = getImageIndex(imageCount, imageTag);
    var image = "images/dave" + imageIndex + ".jpeg";
    document.getElementById("davepic").src = image;
    console.log(image);
  }
</script>
  
</html>